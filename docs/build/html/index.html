
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Overview and Examples &#8212; EV Spatial Model 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">EV Spatial Model 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="overview-and-examples">
<h1>Overview and Examples<a class="headerlink" href="#overview-and-examples" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Mahmoud Shepero</p>
</dd>
<dt class="field-even">Developer</dt>
<dd class="field-even"><p><a class="reference external" href="http://katalog.uu.se/empinfo/?id=N16-259">Mahmoud Shepero</a></p>
</dd>
<dt class="field-odd">Email</dt>
<dd class="field-odd"><p><a class="reference external" href="mailto:mahmoud&#46;shepero&#37;&#52;&#48;angstrom&#46;uu&#46;se">mahmoud<span>&#46;</span>shepero<span>&#64;</span>angstrom<span>&#46;</span>uu<span>&#46;</span>se</a></p>
</dd>
<dt class="field-even">Version</dt>
<dd class="field-even"><p>1.0.0 of 3-12-2018</p>
</dd>
<dt class="field-odd">License</dt>
<dd class="field-odd"><p><a class="reference external" href="https://www.gnu.org/">GNU General Public License v3.0</a></p>
</dd>
<dt class="field-even">Acknowledgement</dt>
<dd class="field-even"><p>Special thanks to <a class="reference external" href="http://katalog.uu.se/empinfo/?id=N10-1405">Joakim Munkhammar</a> for his theoretical contributions.</p>
</dd>
</dl>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is a spatial model to estimate the charging load of electric vehicles in
cities. The model is published in <em>Spatial Markov chain model for electric
vehicle charging in cities using geographical information system (GIS) data,
Applied Energy, 231C (2018), pp. 1089-1099</em>.</p>
<p>The model uses discrete Markov chain to spatially model the mobility of
cars in cities. If we assume that cars are moving between parking places. It
also assumes that parking places in cities can be clustered–based on nearby buildings–into
three distinct categories: Work, Home, and Other. Work category includes workplaces,
hospitals, universities and schools. Home describes residential places. Other
describes shopping, leisure, cultural, and religious locations.</p>
<a class="reference internal image-reference" href="_images/markovChainModel.pdf"><img alt="_images/markovChainModel.pdf" class="align-center" src="_images/markovChainModel.pdf" style="width: 300px; height: 300px;" /></a>
</div>
<div class="section" id="indixes-and-tables">
<h2>Indixes and tables<a class="headerlink" href="#indixes-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<p><strong>Summary of model classes and functions:</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ev.EV" title="ev.EV"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ev.EV</span></code></a>(currentLocation, currentState[, mpg, …])</p></td>
<td><p>Electric vehicle class.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parkinglot.ParkingLot</span></code></a>(ID, state, …[, …])</p></td>
<td><p>A class representing parking lots.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#markov.Markov" title="markov.Markov"><code class="xref py py-obj docutils literal notranslate"><span class="pre">markov.Markov</span></code></a>(chain[, dim])</p></td>
<td><p>Class for the Markov chain.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#simulation.Simulation" title="simulation.Simulation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulation.Simulation</span></code></a>(stations, cars, chain, …)</p></td>
<td><p>A class representing the simulation model.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#extractDistances.extractDistances" title="extractDistances.extractDistances"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extractDistances.extractDistances</span></code></a>(filesLocation)</p></td>
<td><p>Extracts the trip distances files into a dictionary which can be used in the model.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#extractFiles.readMatrixfiles" title="extractFiles.readMatrixfiles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extractFiles.readMatrixfiles</span></code></a>(files[, precision])</p></td>
<td><p>Extracts the tranistion matrix into a 3-d numpy array which can be used in the model.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>In this part few examples are provided. For a simple example to run the model
for one week is provided in the file <em>toyExample.py</em>.</p>
<p>Example 1, download all the OSM tags within a region:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/*
Get all the tags of the amenity in this bounding box, save them into csv.
The bounding box is given lat, long, lat, long.
This example gets the values for Gotland, Sweden
*/
[out:csv(amenity; false)]
[bbox:56.905303,18.091240,58.001904,19.347141];
(
    way
    ;
    &gt;;
);
out;
</pre></div>
</div>
<p>Save the previous text into a file say <em>query.txt</em>, and to download the OSM tags you need to send this query to OSM Overpass API by doing the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wget -O Output.csv --post-file<span class="o">=</span>query.txt <span class="s2">&quot;https://overpass-api.de/api/interpreter&quot;</span>
</pre></div>
</div>
<p>This code will save a csv file with all the tags in the amenity field in Gotland, Sweden. Note that there might be many empty rows.</p>
<p>Example 2, download OSM map with certain tags, e.g., parking locations in Gotland:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/*
Download the parking locations in Gotland, Sweden.
*/
[bbox:56.905303,18.091240,58.001904,19.347141];
(
  way
    [&quot;building&quot;~&quot;^garage&quot;];

  way
    [&quot;amenity&quot;~&quot;^parking&quot;];
);
(
    ._;
    &gt;;
);
out;
</pre></div>
</div>
<p>Similar to Example 1, we can download the data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wget -O output.osm --post-file<span class="o">=</span>query.txt <span class="s2">&quot;https://overpass-api.de/api/interpreter&quot;</span>
</pre></div>
</div>
<p>Remeber to change the output file extension to <em>osm</em> instead of <em>csv</em>.</p>
</div>
<div class="section" id="model-implementation">
<h1>Model implementation<a class="headerlink" href="#model-implementation" title="Permalink to this headline">¶</a></h1>
<p>In this Section a detailed description for the model implementation is provided.</p>
<div class="section" id="module-ev">
<span id="electric-vehicles"></span><h2>Electric vehicles<a class="headerlink" href="#module-ev" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ev.EV">
<em class="property">class </em><code class="sig-prename descclassname">ev.</code><code class="sig-name descname">EV</code><span class="sig-paren">(</span><em class="sig-param">currentLocation</em>, <em class="sig-param">currentState</em>, <em class="sig-param">mpg=0.2</em>, <em class="sig-param">batteryCharge=0.0</em>, <em class="sig-param">batteryCapacity=0.0</em>, <em class="sig-param">trips=0</em>, <em class="sig-param">distance=0</em>, <em class="sig-param">rnd=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV" title="Permalink to this definition">¶</a></dt>
<dd><p>Electric vehicle class.</p>
<p>This class represents electric vehicles.</p>
<dl class="attribute">
<dt id="ev.EV.currentLocation">
<code class="sig-name descname">currentLocation</code><a class="headerlink" href="#ev.EV.currentLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of the electric vehicle.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><ul class="simple">
<li></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.currentState">
<code class="sig-name descname">currentState</code><a class="headerlink" href="#ev.EV.currentState" title="Permalink to this definition">¶</a></dt>
<dd><p>The current Markov state of the electric vehicle.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><ul class="simple">
<li></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.mpg">
<code class="sig-name descname">mpg</code><a class="headerlink" href="#ev.EV.mpg" title="Permalink to this definition">¶</a></dt>
<dd><p>The miles per gallon (MPG) of the vehicle in unit of energy per distance, e.g.,
kWh/km. ( the default initial value is 0.2 kWh/km)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.batteryCharge">
<code class="sig-name descname">batteryCharge</code><a class="headerlink" href="#ev.EV.batteryCharge" title="Permalink to this definition">¶</a></dt>
<dd><p>The charge in the battery of the electric vehicle in units of
energy,  kWh. The battery charge in this model is assumed to
be 0.0 if the electric vehicle is fully charged, else negative if
the battery is depleted. ( the default initial value is 0.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.batteryCapacity">
<code class="sig-name descname">batteryCapacity</code><a class="headerlink" href="#ev.EV.batteryCapacity" title="Permalink to this definition">¶</a></dt>
<dd><p>The battery capacity of the electric vehicle (kWh). ( the default
initial value is 0.0)
NOT FULLY TESTED. NOW IT IS ALWAYS ZERO WHICH MEANS THAT THE
ELECTRIC VEHICLE HAS INFINTIE RANGE, AND THAT THE ENERGY DEPLETION WAS
WAS MEASURED.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.trips">
<code class="sig-name descname">trips</code><a class="headerlink" href="#ev.EV.trips" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of trips perfromed by the electric vehilce.( the default
initial value is 0.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.distance">
<code class="sig-name descname">distance</code><a class="headerlink" href="#ev.EV.distance" title="Permalink to this definition">¶</a></dt>
<dd><p>The distance traveled by the vehicle.( the default initial value is 0.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ev.EV.rnd">
<code class="sig-name descname">rnd</code><a class="headerlink" href="#ev.EV.rnd" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number used to sample for the next Markov state of the vehicle.
(the default is 0.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.change_location">
<code class="sig-name descname">change_location</code><span class="sig-paren">(</span><em class="sig-param">stations</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.change_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An OrderedDict of the parking lots.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nothing is returned</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.charge_EV">
<code class="sig-name descname">charge_EV</code><span class="sig-paren">(</span><em class="sig-param">duration</em>, <em class="sig-param">stations</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.charge_EV" title="Permalink to this definition">¶</a></dt>
<dd><p>Charges an EV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>power</strong> (<em>float</em>) – The power in the charging station in  units of power ex. (kW).</p></li>
<li><p><strong>duration</strong> (<em>(</em><em>float</em><em>)</em>) – The charging duration in units of time for example (h).</p></li>
<li><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – Stations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>update to the batteryCharge by the charging energy which equals the
power * duration.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.drive_EV">
<code class="sig-name descname">drive_EV</code><span class="sig-paren">(</span><em class="sig-param">distance</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.drive_EV" title="Permalink to this definition">¶</a></dt>
<dd><p>Disharges the EV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>distance</strong> (<em>float</em>) – The distance which was traveled by the electric vehicle.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>update to the batteryCharge to evaluate the depleted energy for
driving which equals distance * mpg.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.find_free_stations">
<code class="sig-name descname">find_free_stations</code><span class="sig-paren">(</span><em class="sig-param">stations</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.find_free_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the vacant ParkingLots which the electric vehicle can occupy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An OrderedDict of ParkingLot objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of keys for the vacant ParkingLots matching
the current state of the vehicle.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(keys)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.find_state">
<code class="sig-name descname">find_state</code><span class="sig-paren">(</span><em class="sig-param">chain</em>, <em class="sig-param">time_step</em>, <em class="sig-param">stations</em>, <em class="sig-param">distances</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.find_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the state of the electric vehicle updates the state, changes the location, occupies the new location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>chain</strong> (<a class="reference internal" href="#markov.Markov" title="markov.Markov"><em>Markov</em></a>) – The Markov chain class which contains the transition matrix and
the remaining methods.</p></li>
<li><p><strong>time_step</strong> (<em>int</em>) – The time in which the tranistion is taking place. The time is needed
to calculate the tranistion probabiltiy from the non-homogenous Markov
chain.</p></li>
<li><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An OrderedDict of the parking lots.</p></li>
<li><p><strong>distances</strong> (<em>dictionary</em>) – A dictionary with keys representing the state transitions and values
containing  a list of distances.
ex. distance = {‘01’: [9.3, 20.0, 13.5]} means that the distances
from state 0 to state 1 are in the list [9.3, 20.0, 13.5]. This
dictionary is used to sample driving distances from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if a change in the state occurs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ev.EV.inital_conditions">
<code class="sig-name descname">inital_conditions</code><span class="sig-paren">(</span><em class="sig-param">stations</em>, <em class="sig-param">initalState</em><span class="sig-paren">)</span><a class="headerlink" href="#ev.EV.inital_conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the vacant ParkingLots which the electric vehicle can occupy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An orderedDict of ParkingLot objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mutates the current state.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
</div>
<div class="section" id="module-parkinglot">
<span id="parking-lots"></span><h2>Parking lots<a class="headerlink" href="#module-parkinglot" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="parkinglot.ParkingLot">
<em class="property">class </em><code class="sig-prename descclassname">parkinglot.</code><code class="sig-name descname">ParkingLot</code><span class="sig-paren">(</span><em class="sig-param">ID</em>, <em class="sig-param">state</em>, <em class="sig-param">chargingPower</em>, <em class="sig-param">maximumOccupancy</em>, <em class="sig-param">currentOccupancy</em>, <em class="sig-param">chargingStatus=True</em>, <em class="sig-param">currentLoad=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#parkinglot.ParkingLot" title="Permalink to this definition">¶</a></dt>
<dd><p>A class representing parking lots.</p>
<dl class="attribute">
<dt id="parkinglot.ParkingLot.ID">
<code class="sig-name descname">ID</code><a class="headerlink" href="#parkinglot.ParkingLot.ID" title="Permalink to this definition">¶</a></dt>
<dd><p>ID of the station, ususally string.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><ul class="simple">
<li></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="parkinglot.ParkingLot.state">
<code class="sig-name descname">state</code><a class="headerlink" href="#parkinglot.ParkingLot.state" title="Permalink to this definition">¶</a></dt>
<dd><p>The state of the station. What is the station used for.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="parkinglot.ParkingLot.chargingPower">
<code class="sig-name descname">chargingPower</code><a class="headerlink" href="#parkinglot.ParkingLot.chargingPower" title="Permalink to this definition">¶</a></dt>
<dd><p>The charging power of the station. Set it to 0.0 if the station does not
charge the vehicle.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="parkinglot.ParkingLot.maximumOccupancy">
<code class="sig-name descname">maximumOccupancy</code><a class="headerlink" href="#parkinglot.ParkingLot.maximumOccupancy" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of charging ports available in the parking lot.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="parkinglot.ParkingLot.chargingStatus">
<code class="sig-name descname">chargingStatus</code><a class="headerlink" href="#parkinglot.ParkingLot.chargingStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean, true if charging is enabled in this parking lot.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="parkinglot.ParkingLot.currentLoad">
<code class="sig-name descname">currentLoad</code><a class="headerlink" href="#parkinglot.ParkingLot.currentLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>The current load of the station in the unit of power.( the default
initially is 0.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parkinglot.ParkingLot.charge_EV">
<code class="sig-name descname">charge_EV</code><span class="sig-paren">(</span><em class="sig-param">power</em><span class="sig-paren">)</span><a class="headerlink" href="#parkinglot.ParkingLot.charge_EV" title="Permalink to this definition">¶</a></dt>
<dd><p>Charges the EV and updates the load of the station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parkinglot.ParkingLot.leave_station">
<code class="sig-name descname">leave_station</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parkinglot.ParkingLot.leave_station" title="Permalink to this definition">¶</a></dt>
<dd><p>Leaves the parking lot, decreases the occupancy by one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="parkinglot.ParkingLot.occupy_station">
<code class="sig-name descname">occupy_station</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parkinglot.ParkingLot.occupy_station" title="Permalink to this definition">¶</a></dt>
<dd><p>Occupies the parking lot, increases the occupancy by one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
</div>
<div class="section" id="module-markov">
<span id="markov-chain-implementation"></span><h2>Markov chain implementation<a class="headerlink" href="#module-markov" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="markov.Markov">
<em class="property">class </em><code class="sig-prename descclassname">markov.</code><code class="sig-name descname">Markov</code><span class="sig-paren">(</span><em class="sig-param">chain</em>, <em class="sig-param">dim=1</em><span class="sig-paren">)</span><a class="headerlink" href="#markov.Markov" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for the Markov chain.</p>
<p>This class represents the transition martices.</p>
<dl class="attribute">
<dt id="markov.Markov.chain">
<code class="sig-name descname">chain</code><a class="headerlink" href="#markov.Markov.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>The transition matrix as 3-d array. Square matrix in both the first two
dimensions, where the row represents the current state, and the coulumn
represents the following state. The z-axis represents the inhomogenous
factor, which is the dependancy on the transition time.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>np.array(floats)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="markov.Markov.dim">
<code class="sig-name descname">dim</code><a class="headerlink" href="#markov.Markov.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The dimention at which the sum of the transition matrix add to oneself.
(the default is 1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="markov.Markov.extract_transition_probability">
<code class="sig-name descname">extract_transition_probability</code><span class="sig-paren">(</span><em class="sig-param">currentState</em>, <em class="sig-param">time_step=None</em><span class="sig-paren">)</span><a class="headerlink" href="#markov.Markov.extract_transition_probability" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the transition probability from the current state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentState</strong> (<em>int</em>) – The current state of the Markov chain.</p></li>
<li><p><strong>time_step</strong> (<em>int</em><em>, </em><em>optional</em>) – The time step of the inhomegenous Markov chain. Use only if you use
an inhomegenous Markov chain. (the default is None)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The row of the tranistion probabilty matrix for the current state
and time.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="markov.Markov.next_state">
<code class="sig-name descname">next_state</code><span class="sig-paren">(</span><em class="sig-param">currentState</em>, <em class="sig-param">rnd</em>, <em class="sig-param">time_step=None</em><span class="sig-paren">)</span><a class="headerlink" href="#markov.Markov.next_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the future state of the Markov chain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>currentState</strong> (<em>int</em>) – The current state of the Markov chain.</p></li>
<li><p><strong>rnd</strong> (<em>float</em>) – A random number.</p></li>
<li><p><strong>time_step</strong> (<em>int</em><em>, </em><em>optional</em>) – The time step of the inhomegenous Markov chain. Use only if you use
an inhomegenous Markov chain. (the default is None)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The future state of the Markov chain.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
</div>
<div class="section" id="module-simulation">
<span id="model-simulation-implementation"></span><h2>Model simulation implementation<a class="headerlink" href="#module-simulation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="simulation.Simulation">
<em class="property">class </em><code class="sig-prename descclassname">simulation.</code><code class="sig-name descname">Simulation</code><span class="sig-paren">(</span><em class="sig-param">stations</em>, <em class="sig-param">cars</em>, <em class="sig-param">chain</em>, <em class="sig-param">distancesDictionary</em>, <em class="sig-param">timeSteps</em>, <em class="sig-param">resolution=0.016666666666666666</em><span class="sig-paren">)</span><a class="headerlink" href="#simulation.Simulation" title="Permalink to this definition">¶</a></dt>
<dd><p>A class representing the simulation model.</p>
<p>In this class, the simulation data is inputed in addition the model is ran
and the results are returned.</p>
<dl class="attribute">
<dt id="simulation.Simulation.stations">
<code class="sig-name descname">stations</code><a class="headerlink" href="#simulation.Simulation.stations" title="Permalink to this definition">¶</a></dt>
<dd><p>An OrderedDict of the available parking lots in the city. Make sure that there
are enough parking lots to fit the cars.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>OrderedDict(<a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot">ParkingLot</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="simulation.Simulation.cars">
<code class="sig-name descname">cars</code><a class="headerlink" href="#simulation.Simulation.cars" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of EVs which will be simulated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list(<a class="reference internal" href="#ev.EV" title="ev.EV">EV</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="simulation.Simulation.chain">
<code class="sig-name descname">chain</code><a class="headerlink" href="#simulation.Simulation.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of Markov class which contains the markov chain for weekday
and weekend respectively. The dictionary should have the keys: True, False
, respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[<a class="reference internal" href="#markov.Markov" title="markov.Markov">Markov</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="simulation.Simulation.distancesDictionary">
<code class="sig-name descname">distancesDictionary</code><a class="headerlink" href="#simulation.Simulation.distancesDictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionray containing the distances of trips between states, See help
of Markov class for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="simulation.Simulation.timeSteps">
<code class="sig-name descname">timeSteps</code><a class="headerlink" href="#simulation.Simulation.timeSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>A pandas.date_range containing the timesteps through which the simulation
is to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.DatetimeIndex</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="simulation.Simulation.resolution">
<code class="sig-name descname">resolution</code><a class="headerlink" href="#simulation.Simulation.resolution" title="Permalink to this definition">¶</a></dt>
<dd><p>The resolution of the timestep. Used to charge the EV class. (the
default is 1/60). OTHER VALUES ARE YET NOT FULLY TESTED YET.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
</div>
<div class="section" id="module-extractDistances">
<span id="auxiliary-functions"></span><h2>Auxiliary functions<a class="headerlink" href="#module-extractDistances" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="extractDistances.extractDistances">
<code class="sig-prename descclassname">extractDistances.</code><code class="sig-name descname">extractDistances</code><span class="sig-paren">(</span><em class="sig-param">filesLocation</em>, <em class="sig-param">maxTripDist=inf</em>, <em class="sig-param">scale=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#extractDistances.extractDistances" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the trip distances files into a dictionary which can be used
in the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filesLocation</strong> (<em>str</em>) – The location of the files. The file names have to include the origin state
and the destination state in the end of the file name, just before the
extension. Example ABC01.txt, ABC10.csv.</p></li>
<li><p><strong>maxTripDist</strong> (<em>float</em><em>, </em><em>optional</em>) – The maximum trip distance to filter at.( the default initial value is
infintiy)</p></li>
<li><p><strong>scale</strong> (<em>float</em><em>, </em><em>optional</em>) – A scale to multiply the distances with. Used to simulate various scenarios
of daily driving distances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary containting the length of trips between states.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-extractFiles"></span><dl class="function">
<dt id="extractFiles.readMatrixfiles">
<code class="sig-prename descclassname">extractFiles.</code><code class="sig-name descname">readMatrixfiles</code><span class="sig-paren">(</span><em class="sig-param">files</em>, <em class="sig-param">precision=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#extractFiles.readMatrixfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the tranistion matrix into a 3-d numpy array which can be used
in the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>str</em>) – The location of the files</p></li>
<li><p><strong>precision</strong> (<em>int</em><em>, </em><em>optional</em>) – The precision factor. Is used to correct for mistakes in decimal number
approximations in computer systems. The default will work fine.(the
default is 1000)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy array containing the transition matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-auxiliary"></span><dl class="function">
<dt id="auxiliary.aggregate_time_series">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">aggregate_time_series</code><span class="sig-paren">(</span><em class="sig-param">ts</em>, <em class="sig-param">timeStep</em>, <em class="sig-param">aggrFunc</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.aggregate_time_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregates a time series by applying a function to the values within timeSteps.</p>
<dl class="simple">
<dt>ts<span class="classifier">numpy 1D array</span></dt><dd><p>time series that needs to be aggregated. This time series has high</p>
</dd>
</dl>
<p>resolution and length has to be mutliple of timeStep.
timeStep : int</p>
<blockquote>
<div><p>The time step used to apply the function to.</p>
</div></blockquote>
<dl class="simple">
<dt>aggrFunc<span class="classifier">function</span></dt><dd><p>The aggregation function to apply to a numpy row. For example,</p>
</dd>
</dl>
<p>lambda x: np.sum(x, axis=1) to sum over the values.
Alternatively, np.mean can be used. If NaNs are expected use
np.nansum and np.nanmean instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new time series with the function applied to every timeStep elements.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy 1D array</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregate_time_series</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="go">array([ 1,  5,  9, 13, 17])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="auxiliary.collect_stations_results">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">collect_stations_results</code><span class="sig-paren">(</span><em class="sig-param">ID</em>, <em class="sig-param">results</em>, <em class="sig-param">stations</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.collect_stations_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects the results of subsets of charging stations into one station.
Previously charging stations were divided into subset of charging stations
each representing a unique state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ID</strong> (<em>list</em><em>(</em><em>-</em><em>)</em>) – list of unique IDs of charging stations. The same list used in the
create_charging_stations() function.</p></li>
<li><p><strong>results</strong> (<em>numpy.array</em><em>(</em><em>float</em><em>)</em>) – A numpy array containg the results of the simulation, where each column
represents a charging station in the stations list.</p></li>
<li><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An OrderedDict of stations; the one created in the create_charging_stations()
function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A numpy array where each column represents a parking lot from the ID list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_buffer_and_projectLayer">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_buffer_and_projectLayer</code><span class="sig-paren">(</span><em class="sig-param">inLayer</em>, <em class="sig-param">inputCoordinateSystem</em>, <em class="sig-param">outputCoordinateSystem</em>, <em class="sig-param">outputBufferfn</em>, <em class="sig-param">bufferDist=0</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_buffer_and_projectLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Projects layer from the input coordinate to the output corrdinate system,
and saves the file in outputShapefile. This can be used to buffer a layer
if the bufferDist &gt; 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inLayer</strong> (<em>ogr layer</em>) – A vector layer of spatial file. Use ogr.open().GetLayer().</p></li>
<li><p><strong>inputCoordinateSystem</strong> (<em>int</em>) – An EPSG coordinate system (projection) of the vector layer.
Check the <a class="reference external" href="https://epsg.io">https://epsg.io</a>.</p></li>
<li><p><strong>outputCoordinateSystem</strong> (<em>int</em>) – An EPSG coordinate system (projection) of the vector layer.
Check the <a class="reference external" href="https://epsg.io">https://epsg.io</a>.</p></li>
<li><p><strong>outputBufferfn</strong> (<em>string</em>) – Filename used to store the output layer.</p></li>
<li><p><strong>bufferDist</strong> (<em>int</em><em>, </em><em>optional</em>) – The buffer distance in the same units as the original projection, i.e.,
the inputCoordinateSystem. (the default is 0)</p></li>
<li><p><strong>Note</strong> (<em>this function needs correction since the output shapefile does not have</em>) – </p></li>
<li><p><strong>reference system. This should be corrected.</strong> (<em>a</em>) – </p></li>
<li><p><strong>https</strong> (<em>//pcjericks.github.io/py-gdalogr-cookbook/vector_layers.html#create-a-new-layer-from-the-extent-of-an-existing-layer</em>) – </p></li>
<li><p><strong>https</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function saves the buffered layer into a file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_charging_stations">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_charging_stations</code><span class="sig-paren">(</span><em class="sig-param">identitiesArray</em>, <em class="sig-param">areas</em>, <em class="sig-param">percentageOfStates</em>, <em class="sig-param">areaPerCar</em>, <em class="sig-param">charging_status=True</em>, <em class="sig-param">charging_power=3.7</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_charging_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a list of stations
This function is used to create a list of stations. The idea is every
charging station is divided into several charging stations based on the
percentages of areas. Each subset charging station is then considered to have
a unique state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identitiesArray</strong> (<em>list</em><em>(</em><em>-</em><em>)</em>) – A list of unique names (IDs) for each station. It is used to name the
stations and their subsets.</p></li>
<li><p><strong>areas</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – A list containing the areas of each charging station.</p></li>
<li><p><strong>percentageOfStates</strong> (<em>numpy.array</em><em>(</em><em>float</em><em>)</em>) – A numpy array containing the percentage of areas of each feature dedicated
to each state. In other words, each charging station will be divided into
several states, what is the percentage of division.</p></li>
<li><p><strong>areaPerCar</strong> (<em>float</em>) – A float encoding the ground area needed to fit a car in a parking lot.
This area should take into account the manuevering area and landscaping
area.</p></li>
<li><p><strong>charging_status</strong> (<em>list</em><em>(</em><em>bool</em><em>)</em><em>, </em><em>optional</em>) – Which stations will only be considered parking lots and no charging will
be enabled in. Default True.</p></li>
<li><p><strong>charging_power</strong> (<em>float</em><em>, </em><em>optional</em>) – The charging power of the stations. Default 3.7 kW.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An orderedDict of parking lots representing charging stations and or parking lots
without charging.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>OrderedDict(<a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot">ParkingLot</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_polygon">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_polygon</code><span class="sig-paren">(</span><em class="sig-param">coordinates</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a ogr polygon from a set of coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coordinates</strong> (<em>list</em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>)</em>) – A list of points representing the coordinates of the vertices of the polygon.
Note, ensure to close the polygon by repeating the first point in the end.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A polygon</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ogr.polygon</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_projection_file">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_projection_file</code><span class="sig-paren">(</span><em class="sig-param">fileName</em>, <em class="sig-param">outputCoordinateSystem</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_projection_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a the projectionfile of a specific reference system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<em>str</em>) – The name of the output file without .prj.</p></li>
<li><p><strong>outputCoordinateSystem</strong> (<em>int</em>) – An EPSG coordinate system (projection) of the vector layer.
Check the <a class="reference external" href="https://epsg.io">https://epsg.io</a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Saves a file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_rectangle">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_rectangle</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">dx</em>, <em class="sig-param">y</em>, <em class="sig-param">dy</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_rectangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing the coordinates of a rectangle vertices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em>, </em><em>int</em>) – The x-coordinate of a vertix.</p></li>
<li><p><strong>dx</strong> (<em>float</em><em>, </em><em>int</em>) – The width of the rectangle-along the x-axis.</p></li>
<li><p><strong>y</strong> (<em>float</em><em>, </em><em>int</em>) – The y-coordinate of a vertix.</p></li>
<li><p><strong>dy</strong> (<em>float</em><em>, </em><em>int</em>) – The height of the rectangle-along the y-axis.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.create_spatial_grid">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">create_spatial_grid</code><span class="sig-paren">(</span><em class="sig-param">initialXCoord</em>, <em class="sig-param">initialYCoord</em>, <em class="sig-param">spacingX</em>, <em class="sig-param">spacingY</em>, <em class="sig-param">numberOfXGridCells</em>, <em class="sig-param">numberOfYGridCells</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.create_spatial_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a grid of squares.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initialXCoord</strong> (<em>int</em>) – The starting x coordinate of the grid.</p></li>
<li><p><strong>initialYCoord</strong> (<em>int</em>) – The starting y coordinate of the grid.</p></li>
<li><p><strong>spacingX</strong> (<em>int</em>) – The width of the grid-along the x axis.</p></li>
<li><p><strong>spacingY</strong> (<em>int</em>) – The height of the grid-along the y axis.</p></li>
<li><p><strong>numberOfXGridCells</strong> (<em>int</em>) – The number of horizontal grid cells-along the x axis.</p></li>
<li><p><strong>numberOfYGridCells</strong> (<em>int</em>) – The number of vertical grid cells-along the y axis.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing a list of the coordinates of the vertices of each
grid cell.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(list(int, int))</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.cross_correlation">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">cross_correlation</code><span class="sig-paren">(</span><em class="sig-param">ts1</em>, <em class="sig-param">ts2</em>, <em class="sig-param">lag</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.cross_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the cross-correlation between two time-series.</p>
<dl class="simple">
<dt>ts1<span class="classifier">np 1-D array</span></dt><dd><p>First time-series.</p>
</dd>
<dt>ts2<span class="classifier">np 1-D array</span></dt><dd><p>Second time-series.</p>
</dd>
<dt>lag<span class="classifier">int</span></dt><dd><p>Lag at which to calculate the cross correlation.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Cross-correlation value.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.extract_state_load">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">extract_state_load</code><span class="sig-paren">(</span><em class="sig-param">load</em>, <em class="sig-param">requiredState</em>, <em class="sig-param">stations</em>, <em class="sig-param">aggregated=False</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.extract_state_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the load of all the stations that belong to a certain state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load</strong> (<em>numpy.array</em><em>(</em><em>float</em><em>)</em>) – A numpy array where each column represnts the load of a single station
or subset thereof.</p></li>
<li><p><strong>requiredState</strong> (<em>int</em>) – An integer representing the code of the required state.</p></li>
<li><p><strong>stations</strong> (<em>OrderedDict</em><em>(</em><a class="reference internal" href="#parkinglot.ParkingLot" title="parkinglot.ParkingLot"><em>ParkingLot</em></a><em>)</em>) – An OrderedDict of stations; the one created in the create_charging_stations()
function.</p></li>
<li><p><strong>aggregated</strong> (<em>bool</em><em>, </em><em>optional</em>) – False (default) if we want to return the load of every station, else
the function sums the load of all stations and returns the aggregate
load.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.array(float)</em> – The load of every/the aggregate load of stations belonging to the
specified state.</p></li>
<li><p><em>TODO correct to make it suitable with orderedDict. The code will not work.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.get_features_areas">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">get_features_areas</code><span class="sig-paren">(</span><em class="sig-param">Layer</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.get_features_areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of feature areas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Layer</strong> (<em>ogr layer</em>) – A layer that we want to find the areas of it’s features</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing the area of features inside the layer</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.get_field_tags">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">get_field_tags</code><span class="sig-paren">(</span><em class="sig-param">layer</em>, <em class="sig-param">field</em>, <em class="sig-param">unique=True</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.get_field_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of tags in a field of a vector layer
A vector layer contains fields and each field have tags. For example, in
OpenStreetMaps you might find fields like “building”. This field might
have tags such as “hospital”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layer</strong> (<em>an ogr layer</em>) – A layer from a spaital file. Use ogr.open().GetLayer().</p></li>
<li><p><strong>field</strong> (<em>string</em>) – A field in the vector layer. Usually fields are stored as strings.</p></li>
<li><p><strong>unique</strong> (<em>bool</em><em>, </em><em>optional</em>) – Returns only unique tags if True, else it returns the tag of
every feature in the layer.(the default is True)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of tags for the tags stored for this layer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.get_floor_areas_of_intersecting_buildings">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">get_floor_areas_of_intersecting_buildings</code><span class="sig-paren">(</span><em class="sig-param">ParkingLayer</em>, <em class="sig-param">BuildingsLayer</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.get_floor_areas_of_intersecting_buildings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the floor area of the intersecting buildings.
If the parking lot was of type None the returned area will be 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParkingLayer</strong> (<em>ogr layer</em>) – A layer with the parking lots (buffered) as features</p></li>
<li><p><strong>BuildingLayer</strong> (<em>ogr layer</em>) – A layer with the buildings as features</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containg the sum of intersecting areas for each feature</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.get_layer_fields">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">get_layer_fields</code><span class="sig-paren">(</span><em class="sig-param">layer</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.get_layer_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fields of features in a vector layer.
A vector file contains layers and each layer have fields of information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>layer</strong> (<em>an ogr layer</em>) – A layer from a spaital file. Use ogr.open().GetLayer().</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of the fields available for a layer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(fields)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.get_percentage_of_area_types">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">get_percentage_of_area_types</code><span class="sig-paren">(</span><em class="sig-param">parkingLayer</em>, <em class="sig-param">layers</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.get_percentage_of_area_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the percentage of area intersecting each layer in layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parkingLayer</strong> (<em>ogr layer</em>) – A layer with with the parking lots (buffered) as features</p></li>
<li><p><strong>layers</strong> (<em>list</em><em>(</em><em>ogr layer</em><em>)</em>) – A list of layers that we want to estimate the precentage of intersections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array containg the percentage of areas for each layer. This array is
of length equals the number of parking features and of width equals the
number of layers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.list_of_layers">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">list_of_layers</code><span class="sig-paren">(</span><em class="sig-param">mapFile</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.list_of_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the layers in a geographical information systems (GIS) file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mapFile</strong> (<em>ogr opened file</em>) – A spatial opened file. Use ogr.open() function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing the names of the layers in the GIS file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(Unique Layers)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.plot_features">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">plot_features</code><span class="sig-paren">(</span><em class="sig-param">layer</em>, <em class="sig-param">color</em>, <em class="sig-param">scale=0.001</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.plot_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the features of a layer
This is an auxiliary function. Users are encouraged to use their own plotting
funtions. The reason is that every GIS data provider stores the feature
coordinates at differnt depths. This makes this function non-generalizable.
Use this function as inspiration instead.</p>
<p>Note: TODO depth of the geometry.</p>
<p>Plotting listing 13.1 in “Geoprocessing with Python” “Geospatial Development By Example with Python ”
thanks to <a class="reference external" href="http://geoinformaticstutorial.blogspot.se/2012/10/">http://geoinformaticstutorial.blogspot.se/2012/10/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layer</strong> (<em>ogr layer</em>) – A vector layer of spatial file. Use ogr.open().GetLayer().</p></li>
<li><p><strong>color</strong> (<em>matplotlib.color</em>) – A valid color in matplotlib module.</p></li>
<li><p><strong>scale</strong> (<em>float</em>) – A scale to use for the plot. Default 1:1000, i.e., converts meters to
kms in the x and y axes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This function returns a plot.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="auxiliary.save_grid_into_layer">
<code class="sig-prename descclassname">auxiliary.</code><code class="sig-name descname">save_grid_into_layer</code><span class="sig-paren">(</span><em class="sig-param">fileName</em>, <em class="sig-param">polygons</em>, <em class="sig-param">outputCoordinateSystem=None</em><span class="sig-paren">)</span><a class="headerlink" href="#auxiliary.save_grid_into_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a set of polygons into a shapefile.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<em>str</em>) – The name of the output file without .shp.</p></li>
<li><p><strong>polygons</strong> (<em>list</em><em>(</em><em>ogr.polygon</em><em>)</em>) – A list of ogr polygons.</p></li>
<li><p><strong>outputCoordinateSystem</strong> (<em>int</em><em>, </em><em>optional</em>) – An EPSG coordinate system (projection) of the vector layer.
Check the <a class="reference external" href="https://epsg.io">https://epsg.io</a>. Default is None, where no projection is saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>None</em> – Saves a file.</p></li>
<li><p><em>TODO test this I think there is a problem with fileName with and without extenstions.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview and Examples</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#indixes-and-tables">Indixes and tables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#model-implementation">Model implementation</a><ul>
<li><a class="reference internal" href="#module-ev">Electric vehicles</a></li>
<li><a class="reference internal" href="#module-parkinglot">Parking lots</a></li>
<li><a class="reference internal" href="#module-markov">Markov chain implementation</a></li>
<li><a class="reference internal" href="#module-simulation">Model simulation implementation</a></li>
<li><a class="reference internal" href="#module-extractDistances">Auxiliary functions</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">EV Spatial Model 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Mahmoud Shepero.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>