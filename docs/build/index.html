<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1561.6">
  <style type="text/css">
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0000ee; -webkit-text-stroke: #0000ee}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p9 {margin: 0.0px 0.0px 12.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #0000ee; -webkit-text-stroke: #0000ee}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #000000; -webkit-text-stroke: #000000}
    li.li2 {margin: 0.0px 10.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0000ee; -webkit-text-stroke: #0000ee}
    li.li3 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0000ee; -webkit-text-stroke: #0000ee}
    li.li7 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {-webkit-text-stroke: 0px #000000}
    span.s3 {text-decoration: underline ; font-kerning: none}
    span.s4 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s5 {text-decoration: underline ; font-kerning: none; color: #0000ee; -webkit-text-stroke: 0px #0000ee}
    span.s6 {font-kerning: none; color: #0000ee; -webkit-text-stroke: 0px #0000ee}
    span.s7 {font: 12.0px Courier; text-decoration: underline ; font-kerning: none; color: #0000ee; -webkit-text-stroke: 0px #0000ee}
    span.s8 {font: 12.0px Times; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s9 {font: 12.0px Courier; font-kerning: none}
    span.s10 {font: 12.0px Times; text-decoration: underline ; font-kerning: none; color: #0000ee; -webkit-text-stroke: 0px #0000ee}
    span.s11 {font: 12.0px Times; font-kerning: none}
    table.t1 {border-collapse: collapse}
    table.t2 {border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080}
    td.td1 {width: 60.7px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td2 {width: 212.6px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td3 {width: 308.3px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td4 {width: 459.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td5 {width: 65.7px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td6 {width: 259.0px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td7 {width: 417.2px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td8 {width: 484.1px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td9 {width: 333.2px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td10 {width: 63.3px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td11 {width: 636.7px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td12 {width: 261.9px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td13 {width: 35.7px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td14 {width: 366.9px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td15 {width: 334.4px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td16 {width: 220.6px; padding: 1.0px 1.0px 1.0px 1.0px}
    ul.ul1 {list-style-type: disc}
    ul.ul2 {list-style-type: circle}
  </style>
</head>
<body>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Navigation</b></span></h3>
<ul class="ul1">
  <li class="li2"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/genindex.html"><span class="s3">index</span></a></span></li>
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/py-modindex.html"><span class="s3">modules</span></a></span><span class="s4"> |</span></li>
  <li class="li3"><span class="s2"></span><span class="s3">EV Spatial Model 0.0.1 documentation</span><span class="s4"> »</span></li>
</ul>
<p class="p4"><span class="s1"></span><br></p>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; line-height: 28.0px; font: 24.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Overview and Examples</b></span><span class="s5"><b>¶</b></span></h1>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p6"><span class="s1"><b>Authors:</b></span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p7"><span class="s1">Mahmoud Shepero</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p6"><span class="s1"><b>Developers:</b></span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p3"><span class="s3"><a href="http://katalog.uu.se/empinfo/?id=N16-259">Mahmoud Shepero</a></span><span class="s4"> &amp; <a href="http://katalog.uu.se/empinfo/?id=N10-1405"><span class="s5">Joakim Munkhammar</span></a></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p6"><span class="s1"><b>Email:</b></span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p3"><span class="s3"><a href="mailto:mahmoud.shepero%40angstrom.uu.se">mahmoud.shepero@angstrom.uu.se</a></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p6"><span class="s1"><b>Version:</b></span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p7"><span class="s1">0.0.1 of 24-09-2018</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p6"><span class="s1"><b>License:</b></span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p3"><span class="s3"><a href="https://www.gnu.org/">GNU General Public License v3.0</a></span></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Introduction</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p9"><span class="s1">This is a spatial model to estimate the charging load of electric vehicles in cities. The model is published in <i>Spatial Markov chain model for electric vehicle charging in cities using geographical information system (GIS) data, Applied Energy, 2018</i>.</span></p>
<p class="p9"><span class="s1">The model uses discrete Markov chain to spatially model the mobility of cars in cities. If we assume that cars are moving between parking places. It also assumes that parking places in cities can be clustered–based on nearby buildings–into three distinct categories: Work, Home, and Other. Work category includes workplaces, hospitals, universities and schools. Home describes residential places. Other describes shopping, leisure, cultural, and religious locations.</span></p>
<p class="p7"><span class="s6"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/_images/markovChainModel.pdf"></a></span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Indixes and tables</b></span><span class="s5"><b>¶</b></span></h2>
<ul class="ul1">
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/genindex.html"><span class="s3">Index</span></a></span></li>
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/py-modindex.html"><span class="s3">Module Index</span></a></span></li>
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/search.html"><span class="s3">Search Page</span></a></span></li>
</ul>
<p class="p9"><span class="s1"><b>Summary of model classes and functions:</b></span></p>
<table cellspacing="0" cellpadding="0" class="t2">
  <tbody>
    <tr>
      <td valign="top" class="td3">
        <p class="p7"><span class="s7">ev.EV</span><span class="s1">(currentLocation, currentState[, mpg, …])</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">Electric vehicle class.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td3">
        <p class="p10"><span class="s3">parkinglot.ParkingLot</span><span class="s8">(ID, state, …[, …])</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">A class representing parking lots.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td3">
        <p class="p7"><span class="s7">markov.Markov</span><span class="s1">(chain[, dim])</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">Class for the Markov chain.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td3">
        <p class="p7"><span class="s7">simulation.Simulation</span><span class="s1">(stations, cars, chain, …)</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">A class representing the simulation model.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td3">
        <p class="p10"><span class="s3">extractDistances.extractDistances</span><span class="s8">(filesLocation)</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">Extracts the trip distances files into a dictionary which can be used in the model.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td3">
        <p class="p10"><span class="s3">extractFiles.readMatrixfiles</span><span class="s8">(files[, precision])</span></p>
      </td>
      <td valign="top" class="td4">
        <p class="p7"><span class="s1">Extracts the tranistion matrix into a 3-d numpy array which can be used in the model.</span></p>
      </td>
    </tr>
  </tbody>
</table>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; line-height: 28.0px; font: 24.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Examples</b></span><span class="s5"><b>¶</b></span></h1>
<p class="p9"><span class="s1">Example 1:</span></p>
<p class="p11"><span class="s1">for i in list:</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">    </span>print i</span></p>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; line-height: 28.0px; font: 24.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Model implementation</b></span><span class="s5"><b>¶</b></span></h1>
<p class="p9"><span class="s1">In this Section a detailed description for the model implementation is provided.</span></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Electric vehicles</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p7"><span class="s1"><i>class </i></span><span class="s9">ev.EV</span><span class="s1">(<i>currentLocation</i>, <i>currentState</i>, <i>mpg=0.2</i>, <i>batteryCharge=0.0</i>, <i>batteryCapacity=0.0</i>, <i>trips=0</i>, <i>distance=0</i>, <i>rnd=0.0</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Electric vehicle class.</span></p>
<p class="p9"><span class="s1">This class represents electric vehicles.</span></p>
<p class="p11"><span class="s1">currentLocation</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>-</i> – Location of the electric vehicle.</span></p>
<p class="p11"><span class="s1">currentState</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>-</i> – The current Markov state of the electric vehicle.</span></p>
<p class="p11"><span class="s1">mpg</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The MPG of the vehicle in unit of energy per distance, e.g., kWh/km.</span></p>
<p class="p11"><span class="s1">batteryCharge</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The charge in the battery of the electric vehicle in units of energy, kWh. The battery charge in this model is assumed to be 0.0 if the electric vehicle is fully charged, else negative if the battery is depleted.</span></p>
<p class="p11"><span class="s1">batteryCapacity</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The battery capacity of the electric vehicle (kWh). NOT FULLY TESTED. NOW IT IS ALWAYS ZERO WHICH MEANS THAT THE ELECTRIC VEHICLE HAS INFINTIE RANGE, AND THAT THE ENERGY DEPLETION WAS WAS MEASURED.</span></p>
<p class="p11"><span class="s1">trips</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The number of trips perfromed by the electric vehilce. initaldistance (int): Distance driven by the vehicle.</span></p>
<p class="p11"><span class="s1">distance</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The distance traveled by the vehicle.</span></p>
<p class="p11"><span class="s1">rnd</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – Random number used to sample for the next Markov state of the vehicle.</span></p>
<p class="p11"><span class="s1">change_location</span><span class="s11">(<i>stations</i>)</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Changes the location.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td6">
        <p class="p7"><span class="s1"><b>stations</b> (<i>list(</i></span><span class="s5"><i>ParkingLot</i></span><span class="s1"><i>)</i>) – A list of the parking lots.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td6">
        <p class="p7"><span class="s1">nothing is returned</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td6">
        <p class="p7"><span class="s1">None</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><span class="s9">charge_EV</span><span class="s1">(<i>duration</i>, <i>stations</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Charges an EV.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td7">
        <ul class="ul1">
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>power</b> (<i>float</i>) – The power in the charging station in units of power ex. (kW).</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>duration</b> (<i>(float)</i>) –<span class="Apple-converted-space"> </span></span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>charging duration in units of time for example (h)</b> (<i>The</i>) –<span class="Apple-converted-space"> </span></span></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td7">
        <p class="p9"><span class="s1">update to the batteryCharge by the charging energy which equals the power * duration.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td7">
        <p class="p9"><span class="s1">float</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><span class="s9">drive_EV</span><span class="s1">(<i>distance</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Disharges the EV.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td8">
        <p class="p7"><span class="s1"><b>distance</b> (<i>float</i>) – The distance which was traveled by the electric vehicle.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td8">
        <p class="p7"><span class="s1">update to the batteryCharge to evaluate the depleted energy for driving which equals distance * mpg.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td8">
        <p class="p7"><span class="s1">float</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p11"><span class="s1">find_free_stations</span><span class="s11">(<i>stations</i>)</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Finds the vacant ParkingLots which the electric vehicle can occupy.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p7"><span class="s1"><b>stations</b> (<i>list(</i></span><span class="s5"><i>ParkingLot</i></span><span class="s1"><i>)</i>) – A list of ParkingLot objects.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p7"><span class="s1">A list of vacant ParkingLots matching the current state of the vehicle.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p3"><span class="s4">list(</span><span class="s3">ParkingLot</span><span class="s4">)</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><span class="s9">find_state</span><span class="s1">(<i>chain</i>, <i>time_step</i>, <i>stations</i>, <i>distances</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Estimates the state of the electric vehicle updates the state, changes the location, occupies the new location.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td10">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td11">
        <ul class="ul1">
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>chain</b> (</span><span class="s5"><i>Markov</i></span><span class="s1">) – The Markov chain class which contains the transition matrix and the remaining methods.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>time_step</b> (<i>int</i>) – The time in which the tranistion is taking place. The time is needed to calculate the tranistion probabiltiy from the non-homogenous Markov chain.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>stations</b> (<i>list(</i></span><span class="s5"><i>ParkingLot</i></span><span class="s1"><i>)</i>) – A list of the parking lots.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>distances</b> (<i>dictionary</i>) – A dictionary with keys representing the state transitions and values containing a list of distances. ex. distance = {‘01’: [9.3, 20.0, 13.5]} means that the distances from state 0 to state 1 are in the list [9.3, 20.0, 13.5]. This dictionary is used to sample driving distances from.</span></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td10">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td11">
        <p class="p9"><span class="s1">True if a change in the state occurs.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td10">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td11">
        <p class="p9"><span class="s1">bool</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p11"><span class="s1">find_station</span><span class="s11">(<i>stations</i>)</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Returns the current location of the electric vehicle.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td12">
        <p class="p7"><span class="s1"><b>stations</b> (<i>list(</i></span><span class="s5"><i>ParkingLot</i></span><span class="s1"><i>)</i>) – A list of the parkinglots.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td12">
        <p class="p7"><span class="s1">The parking lot in which the electric vehicle is parked.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td12">
        <p class="p3"><span class="s3">ParkingLot</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><span class="s9">inital_conditions</span><span class="s1">(<i>stations</i>, <i>initalState</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Finds the vacant ParkingLots which the electric vehicle can occupy.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p7"><span class="s1"><b>stations</b> (<i>list(</i></span><span class="s5"><i>ParkingLot</i></span><span class="s1"><i>)</i>) – A list of ParkingLot objects.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p7"><span class="s1">A list of vacant ParkingLots matching the current state of the vehicle.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td9">
        <p class="p3"><span class="s4">list(</span><span class="s3">ParkingLot</span><span class="s4">)</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p4"><span class="s1"></span><br></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Parking lots</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p7"><span class="s1"><i>class </i></span><span class="s9">parkinglot.ParkingLot</span><span class="s1">(<i>ID</i>, <i>state</i>, <i>chargingPower</i>, <i>maximumOccupancy</i>, <i>currentOccupancy</i>, <i>chargingStatus=True</i>, <i>currentLoad=0.0</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">A class representing parking lots.</span></p>
<p class="p11"><span class="s1">ID</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>-</i> – ID of the station, ususally string.</span></p>
<p class="p11"><span class="s1">state</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The state of the station. What is the station used for.</span></p>
<p class="p11"><span class="s1">chargingPower</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The charging power of the station. Set it to 0.0 if the station does not charge the vehicle.</span></p>
<p class="p11"><span class="s1">maximumOccupancy</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The number of charging ports available in the parking lot.</span></p>
<p class="p11"><span class="s1">chargingStatus</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>bool</i> – Boolean, true if charging is enabled in this parking lot.</span></p>
<p class="p11"><span class="s1">currentLoad</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The current load of the station in the unit of power.</span></p>
<p class="p11"><span class="s1">charge_EV</span><span class="s11">(<i>power</i>)</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Charges the EV and updates the load of the station.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1"><b>None</b> –<span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p4"><span class="s1"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1">None</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p11"><span class="s1">leave_station</span><span class="s11">()</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Leaves the parking lot, decreases the occupancy by one.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1"><b>None</b> –<span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p4"><span class="s1"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1">None</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p11"><span class="s1">occupy_station</span><span class="s11">()</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Occupies the parking lot, increases the occupancy by one.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1"><b>None</b> –<span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p4"><span class="s1"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td13">
        <p class="p7"><span class="s1">None</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p4"><span class="s1"></span><br></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Markov chain implementation</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p7"><span class="s1"><i>class </i></span><span class="s9">markov.Markov</span><span class="s1">(<i>chain</i>, <i>dim=1</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Class for the Markov chain.</span></p>
<p class="p9"><span class="s1">This class represents the transition martices.</span></p>
<p class="p11"><span class="s1">chain</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>np.array(floats)</i> – The transition matrix as 3-d array. Square matrix in both the first two dimensions, where the row represents the current state, and the coulumn represents the following state. The z-axis represents the inhomogenous factor, which is the dependancy on the transition time.</span></p>
<p class="p11"><span class="s1">dim</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The dimention at which the sum of the transition matrix add to oneself. Default 1.</span></p>
<p class="p7"><span class="s9">extract_transition_probability</span><span class="s1">(<i>currentState</i>, <i>time_step=None</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Extracts the transition probability from the current state.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <ul class="ul1">
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>currentState</b> (<i>int</i>) – The current state of the Markov chain.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>time_step</b> (<i>int</i>) – The time step of the inhomegenous Markov chain.</span></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <p class="p9"><span class="s1">The row of the tranistion probabilty matrix for the current state and time.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <p class="p9"><span class="s1">np.array(float)</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><span class="s9">next_state</span><span class="s1">(<i>currentState</i>, <i>rnd</i>, <i>time_step=None</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Estimates the future state of the Markov chain.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <ul class="ul1">
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>currentState</b> (<i>int</i>) – The current state of the Markov chain.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>rnd</b> (<i>float</i>) – A random number.</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>time_step</b> (<i>int</i>) – The time step of the inhomegenous Markov chain.</span></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <p class="p9"><span class="s1">The future state of the Markov chain.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td14">
        <p class="p9"><span class="s1">int</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p4"><span class="s1"></span><br></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Model simulation implementation</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p7"><span class="s1"><i>class </i></span><span class="s9">simulation.Simulation</span><span class="s1">(<i>stations</i>, <i>cars</i>, <i>chain</i>, <i>distancesDictionary</i>, <i>simulationLength</i>, <i>resolution=0.016666666666666666</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">A class representing the simulation model.</span></p>
<p class="p9"><span class="s1">In this class, the simulation data is inputed in addition the model is ran and the results are returned.</span></p>
<p class="p11"><span class="s1">stations</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>list(ParkingLot)</i> – A list of the available parking lots in the city. Make sure that there are enough parking lots to fit the cars.</span></p>
<p class="p11"><span class="s1">cars</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>list(EV)</i> – A list of EVs which will be simulated.</span></p>
<p class="p11"><span class="s1">numCars</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The number of cars simualted</span></p>
<p class="p11"><span class="s1">chain</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>Markov</i> – A Markov class which contains the markov chain.</span></p>
<p class="p11"><span class="s1">distancesDictionary</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>dict</i> – A dictionray containing the distances of trips between states, See help of Markov class for more details.</span></p>
<p class="p11"><span class="s1">simulationLength</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>int</i> – The number of time steps with which the simulation is run, i.e. the length of the simulation. The time step is determined by the unit of the battery charge and battery capacity for the EV class.</span></p>
<p class="p11"><span class="s1">resolution</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1"><i>float</i> – The resolution of the timestep. Used to charge the EV class. Currently it is set to 1/60 meaning 1 minute on hourly scale. NOT FULLY TESTED YET.</span></p>
<p class="p4"><span class="s1"></span><br></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; line-height: 22.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Auxiliary functions</b></span><span class="s5"><b>¶</b></span></h2>
<p class="p7"><span class="s9">extractDistances.extractDistances</span><span class="s1">(<i>filesLocation</i>, <i>maxTripDist=inf</i>)</span><span class="s5">¶</span></p>
<p class="p9"><span class="s1">Extracts the trip distances files into a dictionary which can be used in the model.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td15">
        <ul class="ul1">
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>filesLocation</b> (<i>str</i>) – The location of the files</span></li>
          <li class="li7"><span class="s2"><b></b></span><span class="s1"><b>maxTripDist</b> (<i>float</i>) – The maximum trip distance to filter at.</span></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td15">
        <p class="p9"><span class="s1">dictionary containting the length of trips between states.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td15">
        <p class="p9"><span class="s1">dict</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p11"><span class="s1">extractFiles.readMatrixfiles</span><span class="s11">(<i>files</i>, <i>precision=1000</i>)</span><span class="s10">¶</span></p>
<p class="p9"><span class="s1">Extracts the tranistion matrix into a 3-d numpy array which can be used in the model.</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Parameters:</b></span></p>
      </td>
      <td valign="top" class="td16">
        <p class="p7"><span class="s1"><b>files</b> (<i>str</i>) – The location of the files</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Returns:</b></span></p>
      </td>
      <td valign="top" class="td16">
        <p class="p7"><span class="s1">Numpy array containing the transition matrix.</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p6"><span class="s1"><b>Return type:</b></span></p>
      </td>
      <td valign="top" class="td16">
        <p class="p7"><span class="s1">np.array</span></p>
      </td>
    </tr>
  </tbody>
</table>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #0000ee; -webkit-text-stroke: #0000ee"><span class="s3"><b>Table Of Contents</b></span></h3>
<ul class="ul1">
  <li class="li3"><span class="s2"></span><span class="s3">Overview and Examples</span></li>
  <ul class="ul2">
    <li class="li3"><span class="s2"></span><span class="s3">Introduction</span></li>
    <li class="li3"><span class="s2"></span><span class="s3">Indixes and tables</span></li>
  </ul>
  <li class="li3"><span class="s2"></span><span class="s3">Examples</span></li>
  <li class="li3"><span class="s2"></span><span class="s3">Model implementation</span></li>
  <ul class="ul2">
    <li class="li3"><span class="s2"></span><span class="s3">Electric vehicles</span></li>
    <li class="li3"><span class="s2"></span><span class="s3">Parking lots</span></li>
    <li class="li3"><span class="s2"></span><span class="s3">Markov chain implementation</span></li>
    <li class="li3"><span class="s2"></span><span class="s3">Model simulation implementation</span></li>
    <li class="li3"><span class="s2"></span><span class="s3">Auxiliary functions</span></li>
  </ul>
</ul>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>This Page</b></span></h3>
<ul class="ul1">
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/_sources/index.rst.txt"><span class="s3">Show Source</span></a></span></li>
</ul>
<p class="p4"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Navigation</b></span></h3>
<ul class="ul1">
  <li class="li2"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/genindex.html"><span class="s3">index</span></a></span></li>
  <li class="li3"><span class="s2"><a href="file:///Users/mahmoudshepero/Documents/PhD/Models/EVSpatialModelPython/docs/build/py-modindex.html"><span class="s3">modules</span></a></span><span class="s4"> |</span></li>
  <li class="li3"><span class="s2"></span><span class="s3">EV Spatial Model 0.0.1 documentation</span><span class="s4"> »</span></li>
</ul>
<p class="p7"><span class="s1">© Copyright 2018, Mahmoud Shepero. Created using <a href="http://sphinx-doc.org/"><span class="s10">Sphinx</span></a> 1.6.3.<span class="Apple-converted-space"> </span></span></p>
</body>
</html>
